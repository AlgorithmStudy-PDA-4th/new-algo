
# 걍 문제를 보고 풀면 되는 문제임 이게 왜 골드 3인지 모르겠음
# 그냥 골드 5문제에서 문제만 어려운 버전
# 소요:40분

```python

>>>>>>> Stashed changes
n=int(input())
graph=[]

dx=[0,1,0,-1]
dy=[-1,0,1,0]

for i in range(n):
    graph.append(list(map(int,input().split())))
start,end=n//2,n//2

d=0
cnt=0
length=1
ans=0

def one_percent(x,y,d,a,one):
    global ans
    nx=x+dx[d]
    ny=y+dy[d]
    if 0<=nx<n and 0<=ny<n:
        graph[nx][ny]+=one
        a-=one
    else:
        ans+=one
        a-=one
    return a

def seven_percent(x,y,d,a,seven):
    global ans
    nx=x+dx[d]
    ny=y+dy[d]
    if 0<=nx<n and 0<=ny<n:
        graph[nx][ny]+=seven
        a-=seven
    else:
        ans+=seven
        a-=seven
    return a
def two_percent(x,y,d,a,two):
    global ans
    nx=x+(dx[d])*2
    ny=y+(dy[d])*2
    if 0<=nx<n and 0<=ny<n:
        graph[nx][ny]+=two
        a-=two
    else:
        ans+=two
        a-=two
    return a
def ten_percent(x,y,d,a,ten):
    global ans
    nx=x+dx[d]
    ny=y+dy[d]
    if 0<=nx<n and 0<=ny<n:
        graph[nx][ny]+=ten
        a-=ten
    else:
        ans+=ten
        a-=ten
    return a
    
    
def wind(a,x,y,d):
    global ans
    nd=(d+3)%4
    ndd=(d+1)%4
    
    nx=x+(dx[d])*2
    ny=y+(dy[d])*2
    five=int(a*0.05)
    one=int(a*0.01)
    ten=int(a*0.1)
    seven=int(a*0.07)
    two=int(a*0.02)
    
    if 0<=nx<n and 0<=ny<n:
        graph[nx][ny]+=five
        a-=five
    else:
        ans+=five
        a-=five
        
    nx_1=x-dx[d]
    ny_1=y-dy[d]
    nx_2=x+dx[d]
    ny_2=y+dy[d]
    
    a=one_percent(nx_1,ny_1,nd,a,one)
    a=one_percent(nx_1,ny_1,ndd,a,one)
    
    a=seven_percent(x,y,nd,a,seven)
    a=seven_percent(x,y,ndd,a,seven)
    
    a=two_percent(x,y,nd,a,two)
    a=two_percent(x,y,ndd,a,two)
    
    a=ten_percent(nx_2,ny_2,nd,a,ten)
    a=ten_percent(nx_2,ny_2,ndd,a,ten)
    if 0<=nx_2<n and 0<=ny_2<n:
        graph[nx_2][ny_2]+=a
    else:
        ans+=a



        
flag=1
while True:
    if cnt==2:
        length+=1
        cnt=0
    for i in range(length):
        start+=dx[d]
        end+=dy[d]
        if graph[start][end]>0:
            wind(graph[start][end],start,end,d)
            graph[start][end]=0
        if start==0 and end==0:
            flag=0
            break
    if flag==0:
        break
    cnt+=1
    d=(d+1)%4

print(ans)
```
![image](https://github.com/user-attachments/assets/d8d37a24-67fb-4e3c-9cb7-e84dd65c969d)

